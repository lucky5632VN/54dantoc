<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>B·∫£o T√†ng S·ªë 3D - B·∫£n S·∫Øc Vi·ªát</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">

    <style>
        body {
            background-color: #0f0f0f !important;
            color: #e0e0e0 !important;
            overflow: hidden;
            /* Kh√≥a cu·ªôn trang ƒë·ªÉ 3D full m√†n */
        }

        /* Danh s√°ch b√™n ph·∫£i */
        .artifact-item {
            transition: all 0.2s ease;
            border-right: 3px solid transparent;
            padding: 15px;
        }

        .artifact-item:hover {
            background-color: #222;
        }

        .artifact-item.active {
            background-color: #1a1a1a;
            border-right-color: #DAA520;
            color: #DAA520;
        }

        .artifact-item img {
            opacity: 0.6;
            transition: opacity 0.3s;
            width: 60px;
            height: 60px;
        }

        .artifact-item.active img {
            opacity: 1;
            border: 2px solid #DAA520;
        }

        /* √Ånh s√°ng t·∫≠p trung */
        .museum-light {
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.08) 0%, #000 90%);
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-track {
            background: #111;
        }
    </style>
</head>

<body class="flex flex-col h-screen font-[Playfair_Display]">

    <main class="flex-grow w-full h-full pt-20 flex flex-col">

        <div class="flex-grow flex flex-col lg:flex-row overflow-hidden border-t border-[#333] gs-reveal">

            <!-- 3D Viewer Area: Mobile 60%, Desktop 80% width -->
            <div class="w-full lg:w-4/5 h-[60vh] lg:h-auto relative flex flex-col border-r border-[#333]">

                <div class="flex-grow relative museum-light overflow-hidden group" id="viewer-container">

                    <iframe id="main-iframe" class="w-full h-[calc(100%+60px)] -mt-[60px]" frameborder="0"
                        allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"
                        allow="autoplay; fullscreen; xr-spatial-tracking" src="">
                    </iframe>

                    <div
                        class="absolute bottom-8 left-1/2 transform -translate-x-1/2 pointer-events-none opacity-60 group-hover:opacity-0 transition-opacity duration-500">
                        <span
                            class="bg-black/70 text-white px-6 py-2 rounded-full text-sm backdrop-blur-md border border-white/10 tracking-wider whitespace-nowrap">
                            üñ±Ô∏è Xoay - Di chuy·ªÉn
                        </span>
                    </div>
                </div>

                <div class="absolute top-6 left-6 max-w-xs md:max-w-md pointer-events-none">
                    <h1 class="text-2xl md:text-5xl font-bold text-white drop-shadow-lg mb-2" id="info-title">T√™n V·∫≠t
                        Ph·∫©m</h1>
                    <div class="w-20 h-1 bg-[#DAA520] mb-3 shadow-lg"></div>
                    <p id="info-desc"
                        class="text-gray-300 text-xs md:text-sm bg-black/60 p-4 rounded-lg backdrop-blur-md border-l-2 border-[#DAA520] shadow-xl line-clamp-3 hidden md:block">
                        M√¥ t·∫£ ng·∫Øn...
                    </p>
                </div>

                <div class="absolute top-6 right-6 pointer-events-auto flex flex-col md:flex-row gap-2">
                    <button id="auto-tour-btn" onclick="toggleAutoTour()"
                        class="bg-[#222] text-white border border-[#DAA520] px-3 py-1.5 md:px-4 md:py-2 rounded font-bold hover:bg-[#DAA520] hover:text-black transition shadow-lg flex items-center justify-center gap-2 text-xs md:text-base">
                        <span>‚ñ∂Ô∏è</span> Tour
                    </button>
                    <button onclick="toggleMusic()"
                        class="bg-[#222] text-white border border-[#DAA520] px-3 py-1.5 md:px-4 md:py-2 rounded font-bold hover:bg-[#DAA520] hover:text-black transition shadow-lg text-xs md:text-base">
                        <span id="music-icon">üîá</span>
                    </button>
                    <button onclick="showFullInfo()"
                        class="bg-[#DAA520] text-black px-3 py-1.5 md:px-4 md:py-2 rounded font-bold hover:bg-white transition shadow-lg text-xs md:text-base">
                        üìñ <span class="hidden md:inline">Chi ti·∫øt</span>
                    </button>
                </div>

                <!-- Fanpage Audio Placeholder -->
                <audio id="bg-music" loop>
                    <source src="https://docs.google.com/uc?export=download&id=1tWj2LbdM6qJWBqNw7Fz0Kx9_QO-JzX3g"
                        type="audio/mp3">
                </audio>
            </div>

            <!-- List Area: Mobile 40%, Desktop 20% width -->
            <div
                class="w-full lg:w-1/5 h-auto flex-1 lg:flex-auto bg-[#161616] flex flex-col shadow-2xl z-10 transition-all">
                <div class="p-3 md:p-5 border-b border-[#333] bg-[#111]">
                    <h3 class="text-[#DAA520] font-bold text-xs uppercase tracking-[0.2em] text-center">B·ªô S∆∞u T·∫≠p</h3>
                </div>
                <div class="overflow-y-auto flex-grow" id="artifact-list">
                </div>

                <div class="p-3 text-center text-[10px] md:text-xs text-gray-600 border-t border-[#333] bg-[#0f0f0f]">
                    B·∫£o t√†ng s·ªë 3D Vi·ªát Nam
                </div>
            </div>

        </div>

    </main>

    <script type="module" src="../js/layout.js"></script>

    <script>
        // --- KHO D·ªÆ LI·ªÜU B·∫¢O T√ÄNG (FULL B·ªò S∆ØU T·∫¨P) ---
        const artifacts = [
            // 1. BI·ªÇU T∆Ø·ª¢NG QU·ªêC GIA
            {
                id: "dong-son-drum",
                sketchfabId: "7e38e31e0ac64f43a2035aecfc32f6b2",
                title: "Tr·ªëng ƒê·ªìng ƒê√¥ng S∆°n",
                desc: "B·∫£o v·∫≠t qu·ªëc gia, k·∫øt tinh c·ªßa n·ªÅn vƒÉn minh s√¥ng H·ªìng r·ª±c r·ª°. M·∫∑t tr·ªëng l√† h√¨nh ·∫£nh m·∫∑t tr·ªùi v√† ƒë·ªùi s·ªëng ng∆∞·ªùi Vi·ªát c·ªï.",
                thumb: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Dong_Son_bronze_drum_02.jpg/800px-Dong_Son_bronze_drum_02.jpg"
            },
            {
                id: "chua-mot-cot",
                sketchfabId: "9b2562f8884141c0b1777e1a1c05887c",
                title: "Ch√πa M·ªôt C·ªôt",
                desc: "Bi·ªÉu t∆∞·ª£ng c·ªßa th·ªß ƒë√¥ H√† N·ªôi v√† Ph·∫≠t gi√°o Vi·ªát Nam. Ki·∫øn tr√∫c 'li√™n hoa ƒë√†i' ƒë·ªôc ƒë√°o t·ª±a ƒë√≥a sen ngh√¨n nƒÉm.",
                thumb: "https://images.unsplash.com/photo-1599707367072-cd6ad66cc5a1?q=80&w=600&auto=format&fit=crop"
            },
            {
                id: "bia-rua",
                sketchfabId: "c4f76076396d46609955225500767005", // ID Bia R√πa
                title: "R√πa ƒê·ªôi Bia ƒê√°",
                desc: "H√¨nh ·∫£nh quen thu·ªôc t·∫°i VƒÉn Mi·∫øu - Qu·ªëc T·ª≠ Gi√°m, th·ªÉ hi·ªán s·ª± tr∆∞·ªùng t·ªìn c·ªßa tri th·ª©c v√† truy·ªÅn th·ªëng hi·∫øu h·ªçc.",
                thumb: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/Stelae_of_Doctors_at_Van_Mieu.jpg/800px-Stelae_of_Doctors_at_Van_Mieu.jpg"
            },

            // 2. VƒÇN MINH L√öA N∆Ø·ªöC
            {
                id: "con-trau",
                sketchfabId: "93b959f40b804d1abf56baf158132bdd", // ID Con Tr√¢u
                title: "Con Tr√¢u Vi·ªát Nam",
                desc: "'Con tr√¢u l√† ƒë·∫ßu c∆° nghi·ªáp'. Lo√†i v·∫≠t hi·ªÅn l√†nh, c·∫ßn c√π g·∫Øn li·ªÅn v·ªõi ng∆∞·ªùi n√¥ng d√¢n v√† n·ªÅn vƒÉn minh l√∫a n∆∞·ªõc.",
                thumb: "https://images.unsplash.com/photo-1533283752582-49b737a092a6?q=80&w=600&auto=format&fit=crop"
            },
            {
                id: "non-la",
                sketchfabId: "08338678a712414fbdbf392e6d8ce53e",
                title: "N√≥n L√°",
                desc: "V·∫ª ƒë·∫πp dung d·ªã, che m∆∞a che n·∫Øng, g·∫Øn li·ªÅn v·ªõi h√¨nh ·∫£nh ng∆∞·ªùi m·∫π, ng∆∞·ªùi ch·ªã tr√™n c√°nh ƒë·ªìng l√∫a.",
                thumb: "https://images.unsplash.com/photo-1528125757672-2d72d1d52374?q=80&w=600&auto=format&fit=crop"
            },
            {
                id: "thuyen-go",
                sketchfabId: "52e90817205d42679655957657105339", // ID Thuy·ªÅn g·ªó
                title: "Thuy·ªÅn Nan S√¥ng N∆∞·ªõc",
                desc: "Ph∆∞∆°ng ti·ªán di chuy·ªÉn ch√≠nh c·ªßa c∆∞ d√¢n v√πng s√¥ng n∆∞·ªõc mi·ªÅn T√¢y v√† c√°c l√†ng ch√†i ven bi·ªÉn.",
                thumb: "https://images.unsplash.com/photo-1565621956272-3d83021ae428?q=80&w=600&auto=format&fit=crop"
            },

            // 3. G·ªêM S·ª® & M·ª∏ THU·∫¨T
            {
                id: "lu-huong",
                sketchfabId: "23752736700448379342628323236993",
                title: "L∆∞ H∆∞∆°ng R·ªìng",
                desc: "V·∫≠t ph·∫©m th·ªù c√∫ng linh thi√™ng, ch·∫°m kh·∫Øc h√¨nh r·ªìng tinh x·∫£o, th·ªÉ hi·ªán l√≤ng th√†nh k√≠nh v·ªõi t·ªï ti√™n.",
                thumb: "https://img.freepik.com/premium-photo/antique-incense-burner-isolated-black-background_145646-89.jpg"
            },
            {
                id: "gom-su",
                sketchfabId: "62350d90285b49c9a3745266d0520664",
                title: "B√¨nh G·ªëm Hoa Lam",
                desc: "Tinh hoa g·ªëm s·ª© B√°t Tr√†ng/Chu ƒê·∫≠u v·ªõi n∆∞·ªõc men lam ƒë·∫∑c tr∆∞ng v√† h·ªça ti·∫øt s∆°n th·ªßy h·ªØu t√¨nh.",
                thumb: "https://gomsubattrang.vn/uploads/news/2019_05/binh-hut-loc-gom-bat-trang-men-ran-co-boc-dong-cao-cap.jpg"
            },
            {
                id: "tranh-dong-ho",
                sketchfabId: "e7b1b076f44849f68d5fc814149e71d8",
                title: "Tranh ƒê√¥ng H·ªì (ƒê√°m C∆∞·ªõi Chu·ªôt)",
                desc: "D√≤ng tranh d√¢n gian kh·∫Øc g·ªó n·ªïi ti·∫øng c·ªßa B·∫Øc Ninh, mang ƒë·∫≠m h∆°i th·ªü cu·ªôc s·ªëng b√¨nh d·ªã v√† h√≥m h·ªânh.",
                thumb: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Dam_cuoi_chuot.jpg/640px-Dam_cuoi_chuot.jpg"
            },

            // 4. KI·∫æN TR√öC
            {
                id: "cong-lang",
                sketchfabId: "4fad9643769f4ff5b71ea66d7f42b8c5",
                title: "C·ªïng L√†ng C·ªï",
                desc: "Ranh gi·ªõi ∆∞·ªõc l·ªá c·ªßa l√†ng qu√™ B·∫Øc B·ªô. N∆°i l∆∞u gi·ªØ nh·ªØng k·ª∑ ni·ªám v√† l√† bi·ªÉu t∆∞·ª£ng c·ªßa s·ª± b√¨nh y√™n.",
                thumb: "https://images.unsplash.com/photo-1605807402482-37c6a47233c2?q=80&w=600&auto=format&fit=crop"
            },
            {
                id: "thuy-dinh",
                sketchfabId: "3baf19c888064c43816ba5552fd85a4c",
                title: "Th·ªßy ƒê√¨nh",
                desc: "S√¢n kh·∫•u m√∫a r·ªëi n∆∞·ªõc gi·ªØa h·ªì, n√©t ki·∫øn tr√∫c ƒë·ªôc ƒë√°o ph·ª•c v·ª• m√¥n ngh·ªá thu·∫≠t ch·ªâ c√≥ ·ªü Vi·ªát Nam.",
                thumb: "https://media.sketchfab.com/models/3baf19c888064c43816ba5552fd85a4c/thumbnails/5ae3c115a25c441bbb9e6024b05bd588/b2512ea6fa524589aa05c4498c091e37.jpeg"
            }
        ];

        let currentIndex = 0;

        function initMuseum() {
            const listContainer = document.getElementById('artifact-list');

            artifacts.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = `artifact-item flex items-center gap-4 cursor-pointer border-b border-[#222] ${index === 0 ? 'active' : ''}`;
                div.onclick = () => loadArtifact(index);

                div.innerHTML = `
                    <img src="${item.thumb}" class="rounded bg-black object-cover border border-gray-700 shadow-sm" alt="${item.title}">
                    <div>
                        <h4 class="text-sm font-bold text-gray-200 leading-tight mb-1 hover:text-[#DAA520] transition">${item.title}</h4>
                        <span class="text-[10px] text-gray-500 uppercase tracking-wider">Hi·ªán v·∫≠t 0${index + 1}</span>
                    </div>
                `;
                listContainer.appendChild(div);
            });

            loadArtifact(0);
        }

        function loadArtifact(index) {
            // stopSpeaking(); // Removed
            currentIndex = index;
            const item = artifacts[index];

            document.querySelectorAll('.artifact-item').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });

            // Hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªïi ch·ªØ
            const titleEl = document.getElementById('info-title');
            const descEl = document.getElementById('info-desc');

            gsap.to([titleEl, descEl], {
                opacity: 0, duration: 0.2, onComplete: () => {
                    titleEl.innerText = item.title;
                    descEl.innerText = item.desc;
                    gsap.to([titleEl, descEl], { opacity: 1, duration: 0.3 });
                }
            });

            // Load 3D
            const iframe = document.getElementById('main-iframe');
            // Th√™m tham s·ªë ui_theme=dark ƒë·ªÉ giao di·ªán Sketchfab t·ªëi m√†u ƒë·ªìng b·ªô
            iframe.src = `https://sketchfab.com/models/${item.sketchfabId}/embed?autostart=1&ui_infos=0&ui_watermark=0&ui_controls=1&transparent=1&ui_theme=dark`;
        }

        // --- TEXT TO SPEECH (THUY·∫æT MINH) - ƒê√É LO·∫†I B·ªé THEO Y√äU C·∫¶U ---

        function showFullInfo() {
            // Hi·ªÉn th·ªã modal thay v√¨ alert
            const item = artifacts[currentIndex];
            const modal = document.createElement('div');
            modal.className = "fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in";
            modal.innerHTML = `
                <div class="bg-[#1a1a1a] border border-[#DAA520] p-8 rounded-xl max-w-2xl w-full relative shadow-2xl">
                    <button onclick="this.closest('.fixed').remove()" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
                    <h2 class="text-3xl font-bold text-[#DAA520] mb-4 border-b border-gray-700 pb-2">${item.title}</h2>
                    <div class="flex gap-6 flex-col md:flex-row">
                        <img src="${item.thumb}" class="w-32 h-32 object-cover rounded border border-gray-600">
                        <p class="text-gray-300 leading-relaxed text-justify flex-1">${item.desc} </p>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // --- MUSIC CONTROL ---
        const bgMusic = document.getElementById('bg-music');
        let isMusicPlaying = false;

        function toggleMusic() {
            if (isMusicPlaying) {
                bgMusic.pause();
                document.getElementById('music-icon').innerText = 'üîá';
            } else {
                bgMusic.play().catch(e => alert("Vui l√≤ng click t∆∞∆°ng t√°c v·ªõi trang tr∆∞·ªõc khi ph√°t nh·∫°c!"));
                document.getElementById('music-icon').innerText = 'üîä';
            }
            isMusicPlaying = !isMusicPlaying;
        }

        // --- AUTO TOUR CONTROL ---
        let autoTourInterval = null;

        function toggleAutoTour() {
            const btn = document.getElementById('auto-tour-btn');

            if (autoTourInterval) {
                // T·∫Øt Tour
                clearInterval(autoTourInterval);
                autoTourInterval = null;
                btn.innerHTML = '<span>‚ñ∂Ô∏è</span> Tour';
                btn.classList.remove('bg-[#DAA520]', 'text-black');
                btn.classList.add('bg-[#222]', 'text-white');
            } else {
                // B·∫≠t Tour
                loadArtifact((currentIndex + 1) % artifacts.length); // Chuy·ªÉn lu√¥n c√°i ti·∫øp theo
                autoTourInterval = setInterval(() => {
                    let nextIndex = (currentIndex + 1) % artifacts.length;
                    loadArtifact(nextIndex);
                }, 10000); // 10 gi√¢y ƒë·ªïi 1 l·∫ßn

                btn.innerHTML = '<span>‚è∏</span> D·ª´ng';
                btn.classList.add('bg-[#DAA520]', 'text-black');
                btn.classList.remove('bg-[#222]', 'text-white');
            }
        }

        initMuseum();
        gsap.from(".gs-reveal", { opacity: 0, y: 30, duration: 1, stagger: 0.2 });

    </script>
</body>

</html>
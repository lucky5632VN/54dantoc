<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bản Đồ Văn Hóa - Bản Sắc Việt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .map-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            /* Increased max-width for better visibility */
            margin: 0 auto;
        }

        .map-marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #C62828;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(198, 40, 40, 0.6);
            transition: transform 0.3s;
            z-index: 10;
            border: 2px solid white;
        }

        .map-marker:hover {
            transform: scale(1.3);
            background-color: #b71c1c;
            z-index: 20;
        }

        .region-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 6px;
            border-radius: 6px;
            border: 1px solid #eee;
            transition: all 0.2s;
            background: white;
        }

        .region-item:hover {
            border-color: #C62828;
            color: #C62828;
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Custom scrollbar for list */
        .region-list-container {
            max-height: 500px;
            overflow-y: auto;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 4px;
        }
    </style>
</head>

<body class="flex flex-col min-h-screen">
    <div class="paper-texture"></div>

    <main class="flex-grow container mx-auto px-6 py-10 pt-28">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-cinnabar mb-2 font-[Playfair_Display]">Bản Đồ Văn Hóa & Phương Ngữ</h1>
            <p class="text-gray-600">Chọn vùng miền để khám phá các dân tộc sinh sống chủ yếu tại đó.</p>
        </div>

        <div class="flex flex-col md:flex-row gap-10 items-start max-w-6xl mx-auto">
            <!-- Cột Trái: Bản Đồ (Dùng ảnh người dùng upload) -->
            <div class="w-full md:w-1/2 bg-white/50 p-4 rounded-xl shadow-lg border border-gray-200 backdrop-blur-sm">
                <div
                    class="map-container relative w-full flex justify-center items-center bg-white rounded-xl overflow-hidden shadow-inner border border-gray-200">
                    <img src="../images/ban-do-day-du.png" alt="Bản đồ hành chính Việt Nam"
                        class="w-full h-auto object-contain max-h-[700px]">

                    <!-- Markers positioned relatively over the image -->
                    <!-- Tinh chỉnh vị trí marker dựa trên ảnh bản đồ mới -->

                    <!-- Miền Bắc -->
                    <div class="map-marker group" style="top: 20%; left: 45%;" data-region="north">
                        <span>Bắc</span>
                        <div
                            class="absolute -top-10 left-1/2 -translate-x-1/2 w-40 bg-white text-gray-800 text-xs p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 transition pointer-events-none z-20 text-center border border-gray-100">
                            Đông Bắc & Tây Bắc Bộ
                        </div>
                    </div>

                    <!-- Miền Trung -->
                    <div class="map-marker group" style="top: 45%; left: 60%;" data-region="central">
                        <span>Trung</span>
                        <div
                            class="absolute -top-10 left-1/2 -translate-x-1/2 w-40 bg-white text-gray-800 text-xs p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 transition pointer-events-none z-20 text-center border border-gray-100">
                            Duyên Hải Miền Trung
                        </div>
                    </div>

                    <!-- Tây Nguyên -->
                    <!-- Vị trí Tây Nguyên lệch về phía tây nam miền trung -->
                    <div class="map-marker group" style="top: 68%; left: 48%;" data-region="highlands">
                        <span>TN</span>
                        <div
                            class="absolute -top-10 left-1/2 -translate-x-1/2 w-40 bg-white text-gray-800 text-xs p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 transition pointer-events-none z-20 text-center border border-gray-100">
                            Vùng cao nguyên đất đỏ
                        </div>
                    </div>

                    <!-- Miền Nam -->
                    <div class="map-marker group" style="top: 85%; left: 35%;" data-region="south">
                        <span>Nam</span>
                        <div
                            class="absolute -top-10 left-1/2 -translate-x-1/2 w-40 bg-white text-gray-800 text-xs p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 transition pointer-events-none z-20 text-center border border-gray-100">
                            Đông Nam Bộ & Tây Nam Bộ
                        </div>
                    </div>
                </div>
                <p class="text-xs text-center text-gray-500 mt-4 italic">*Click vào các vị trí đã đánh dấu để xem thông
                    tin vùng miền</p>
            </div>

            <!-- Cột Phải: Thông Tin & Danh Sách -->
            <div class="w-full md:w-1/2">
                <div class="bg-[#FDFBF7] p-6 rounded-xl shadow-lg border-t-4 border-cinnabar sticky top-24">
                    <h3 id="region-title" class="text-3xl font-bold text-gray-800 mb-2 font-[Playfair_Display]">Chọn
                        vùng miền</h3>
                    <p id="region-desc" class="text-gray-600 mb-6 text-sm italic">Thông tin phân bố dân tộc sẽ hiển thị
                        tại đây.</p>

                    <div id="region-content" class="hidden">
                        <h4
                            class="font-bold text-cinnabar mb-4 text-sm uppercase tracking-wide border-b border-gray-200 pb-2">
                            Các dân tộc tiêu biểu:</h4>
                        <div id="region-list" class="region-list-container pr-2">
                            <!-- List render here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script type="module" src="../js/layout.js"></script>

    <script>
        function toSlug(name) {
            return name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/đ/g, "d").replace(/Đ/g, "D").replace(/'/g, "").replace(/\s+/g, "-");
        }

        const data = {
            north: {
                title: "Miền Bắc (Đông Bắc & Tây Bắc)",
                desc: "Vùng núi non hùng vĩ, nơi cư trú của rất nhiều dân tộc thiểu số với trang phục sặc sỡ và lễ hội đặc sắc.",
                groups: ["Kinh", "Tày", "Thái", "Mường", "Nùng", "H'Mông", "Dao", "Sán Chay", "Sán Dìu", "Khơ Mú", "Giáy", "Lào", "Lự", "Phù Lá", "La Hủ", "Hà Nhì"]
            },
            central: {
                title: "Duyên Hải Miền Trung",
                desc: "Vùng đất giao thoa văn hóa Champa cổ và văn hóa Đại Việt, nổi bật với các tháp Chàm và lễ hội biển.",
                groups: ["Kinh", "Chăm", "Bru-Vân Kiều", "Co", "Hrê", "Ta Oi", "Chứt"]
            },
            highlands: {
                title: "Tây Nguyên (Đại Ngàn)",
                desc: "Vùng đất huyền thoại của sử thi Đam San, cồng chiêng và nhà Rông.",
                groups: ["Gia Rai", "Ê Đê", "Ba Na", "Xơ Đăng", "Cơ Ho", "Mnông", "Giẻ Triêng", "Mạ", "Cơ Tu", "Brâu", "Rơ Măm"]
            },
            south: {
                title: "Nam Bộ (Miền Tây & Đông Nam Bộ)",
                desc: "Vùng sông nước miệt vườn, nơi cộng cư lâu đời của ba dân tộc Kinh - Khmer - Hoa.",
                groups: ["Kinh", "Khmer", "Hoa", "Chơ Ro", "X'Tiêng", "Mạ"]
            }
        };

        const markers = document.querySelectorAll('.map-marker');

        function showRegion(key) {
            const info = data[key];
            if (!info) return;

            // Update UI Sidebar
            document.getElementById('region-title').innerText = info.title;
            document.getElementById('region-desc').innerText = info.desc;
            document.getElementById('region-content').classList.remove('hidden');

            const list = document.getElementById('region-list');
            list.innerHTML = '';

            info.groups.forEach((name, idx) => {
                const slug = toSlug(name);
                const div = document.createElement('a');
                div.href = `../dan_toc/dan-toc-${slug}.html`;
                div.className = "region-item block cursor-pointer group";
                div.innerHTML = `
                    <span class="font-bold text-gray-700 group-hover:text-cinnabar">${name}</span>
                    <span class="text-xs text-gray-400 group-hover:text-cinnabar">Chi tiết &rarr;</span>
                `;

                // Animation stagger
                gsap.fromTo(div, { opacity: 0, x: -10 }, { opacity: 1, x: 0, duration: 0.3, delay: idx * 0.05 });
                list.appendChild(div);
            });

            // Highlight Marker
            markers.forEach(m => {
                if (m.dataset.region === key) {
                    m.style.backgroundColor = "#b71c1c";
                    m.style.transform = "scale(1.3)";
                    m.style.zIndex = "20";
                    m.style.border = "2px solid #FFD700"; // Gold border for active
                } else {
                    m.style.backgroundColor = "#C62828";
                    m.style.transform = "scale(1)";
                    m.style.zIndex = "10";
                    m.style.border = "2px solid white";
                }
            });
        }

        // Auto select North first
        showRegion('north');

        markers.forEach(m => {
            m.addEventListener('click', () => showRegion(m.dataset.region));
        });
    </script>
</body>

</html>
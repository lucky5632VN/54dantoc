<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Các Dân Tộc - Bản Sắc Việt</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="flex flex-col min-h-screen">
    
    <div class="paper-texture"></div>

    <main class="flex-grow container mx-auto px-6 py-10 pt-24">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-cinnabar mb-4 font-[Playfair_Display]">54 Dân Tộc Anh Em</h2>
            <p class="text-gray-600 max-w-2xl mx-auto italic">
                "Non sông gấm vóc Việt Nam do phụ nữ ta, trẻ cũng như già, ra sức dệt thêu mà thêm tốt đẹp, rực rỡ."
            </p>
        </div>

        <div id="ethnic-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
            <!-- Javascript sẽ render 54 dân tộc vào đây -->
        </div>

        <script>
            // Danh sách 54 dân tộc
            const ethnicGroups = [
                "Kinh", "Tày", "Thái", "Mường", "Khmer", "Hoa", "Nùng", "H'Mông", "Dao", "Gia Rai", 
                "Ê Đê", "Ba Na", "Xơ Đăng", "Sán Chay", "Cơ Ho", "Chăm", "Sán Dìu", "Hrê", "Ra Glai", 
                "Mnông", "X'Tiêng", "Bru-Vân Kiều", "Khơ Mú", "Cơ Tu", "Giáy", "Giẻ Triêng", "Mạ", "Kháng", 
                "Co", "Tà Ôi", "Chơ Ro", "Xinh Mun", "Hà Nhì", "Chu Ru", "Lào", "La Chí", "La Ha", "Phù Lá", 
                "La Hủ", "Lự", "Lô Lô", "Chứt", "Mảng", "Pà Thẻn", "Cờ Lao", "Cống", "Bố Y", "Si La", 
                "Pu Péo", "Brâu", "Ơ Đu", "Rơ Măm"
            ];

            function toSlug(name) {
                return name.toLowerCase()
                    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                    .replace(/'/g, "")
                    .replace(/\s+/g, "-");
            }

            const grid = document.getElementById('ethnic-grid');
            
            ethnicGroups.forEach((name, index) => {
                const slug = toSlug(name);
                const delay = Math.min((index % 9) * 0.1, 1); // Stagger limited

                const div = document.createElement('div');
                div.className = "group bg-white rounded-xl shadow-lg overflow-hidden hover:-translate-y-2 transition duration-300 border border-gray-200 hover:border-cinnabar relative";
                
                // Animation setup
                gsap.fromTo(div, 
                    { opacity: 0, y: 30 },
                    { opacity: 1, y: 0, duration: 0.6, delay: delay, ease: "power2.out", scrollTrigger: { trigger: grid } }
                );

                // Image logic: Try local, fallback to placeholder
                const imgSrc = `../images/${slug}/logo-dan-toc.jpg`;
                
                div.innerHTML = `
                    <div class="overflow-hidden h-48 relative bg-gray-100">
                        <img src="${imgSrc}" 
                             onerror="this.src='https://placehold.co/400x280/EEE/31343C?text=${name}'"
                             class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                        <div class="absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur">
                            #${index + 1}
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2 text-gray-800 font-[Playfair_Display]">Dân tộc ${name}</h3>
                        <p class="text-gray-600 mb-4 text-sm line-clamp-2">Khám phá văn hóa, phong tục và con người dân tộc ${name}.</p>
                        
                        <a href="../dan_toc/dan-toc-${slug}.html" class="inline-block px-6 py-2 bg-cinnabar text-white rounded-full text-sm font-bold hover:bg-red-800 transition shadow-md">
                            Khám phá &rarr;
                        </a>
                    </div>
                `;
                grid.appendChild(div);
            });
        </script>
    </main>

    <script type="module" src="../js/layout.js"></script>
</body>
</html>